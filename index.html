<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ashoka Focus‚Ñ¢ | Founder Edition</title>
    <style>
        :root { --bg-color: #050b14; --neon-green: #00ff9d; --premium-gold: #ffd700; --text-main: #e2e8f0; --text-muted: #94a3b8; }
        body { background-color: var(--bg-color); color: var(--text-main); font-family: 'Segoe UI', sans-serif; margin: 0; height: 100vh; display: flex; flex-direction: column; align-items: center; overflow: hidden; }
        .fog { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 50% 50%, #0f1c2e 0%, var(--bg-color) 70%); z-index: -1; }
        header { width: 100%; padding: 20px; display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; }
        .brand { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .brand img { height: 45px; filter: drop-shadow(0 0 5px rgba(0,255,157,0.3)); }
        .publisher { font-size: 0.6rem; color: var(--text-muted); text-transform: uppercase; }
        #badge { font-size: 0.7rem; color: var(--neon-green); border: 1px solid var(--neon-green); padding: 2px 8px; border-radius: 12px; transition: 0.5s; }
        .visualizer-container { flex-grow: 1; display: flex; justify-content: center; align-items: center; }
        .breathing-circle { width: 160px; height: 160px; border-radius: 50%; background: linear-gradient(145deg, #1e293b, #0f172a); display: flex; justify-content: center; align-items: center; position: relative; border: 1px solid rgba(255,255,255,0.05); }
        .breathing-circle::after { content: ''; position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 2px solid var(--neon-green); opacity: 0; }
        .active-pulse::after { animation: pulse 4s infinite ease-in-out; opacity: 1; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(1.2); opacity: 0.2; } 100% { transform: scale(1); opacity: 0.6; } }
        .timer-display { font-size: 2rem; font-weight: 200; }
        .controls { width: 100%; max-width: 500px; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(15px); border-radius: 25px 25px 0 0; padding: 25px 20px; display: flex; flex-direction: column; gap: 15px; }
        .mode-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .mode-btn { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); color: var(--text-muted); padding: 12px; border-radius: 10px; font-size: 0.8rem; cursor: pointer; }
        .mode-btn.active { background: rgba(0, 255, 157, 0.1); border-color: var(--neon-green); color: var(--neon-green); }
        .play-btn { width: 100%; padding: 18px; background: var(--neon-green); color: #000; font-weight: 700; border: none; border-radius: 50px; cursor: pointer; }
        .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); z-index: 1000; display: flex; justify-content: center; align-items: center; }
        .modal { background: #0f172a; padding: 25px; border-radius: 15px; border: 1px solid #334155; max-width: 320px; text-align: center; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="fog"></div>
    <div id="safetyPopup" class="overlay"><div class="modal"><h3>Founder Verification</h3><p>Enter Secret PIN for Elite Access</p><input type="password" id="pinInput" style="width:100%; padding:10px; margin:10px 0; background:#050b14; color:white; border:1px solid #334155;"><br><button onclick="verifyPin()" style="padding:10px 20px; cursor:pointer;">Verify</button> <button onclick="closeLogin()" style="background:none; border:none; color:gray; cursor:pointer;">Cancel</button></div></div>
    
    <header>
        <div class="brand" onclick="handleLogoClick()">
            <img src="assets/logo.png" alt="Logo">
            <div>
                <div style="font-size: 1.1rem; font-weight: 700;">ASHOKA<span>FOCUS‚Ñ¢</span></div>
                <span class="publisher">by Ashoka Music Lab</span>
            </div>
        </div>
        <div id="badge">FREE VERSION</div>
    </header>

    <div class="visualizer-container">
        <div class="breathing-circle" id="circle"><div class="timer-display" id="timer">00:00</div></div>
    </div>

    <div class="controls">
        <div class="mode-grid">
            <button class="mode-btn active" onclick="setMode('focus')">üçÉ Nature Flow</button>
            <button class="mode-btn" onclick="setMode('maths')">üìê Math Focus (40Hz)</button>
            <button id="premium1" class="mode-btn" style="opacity:0.3" onclick="alert('Elite Access Required')">‚ú® Solfeggio 528Hz</button>
            <button id="premium2" class="mode-btn" style="opacity:0.3" onclick="alert('Elite Access Required')">‚ö° Gamma Burst</button>
        </div>
        <button class="play-btn" id="playBtn" onclick="togglePlay()">START SESSION</button>
    </div>

    <script>
        let audioCtx, isPlaying = false, currentMode = 'focus', oscillators = [], gainNode, logoClicks = 0, isPremium = false;

        function handleLogoClick() { logoClicks++; if(logoClicks >= 5) { document.getElementById('safetyPopup').classList.remove('hidden'); logoClicks = 0; } }
        function closeLogin() { document.getElementById('safetyPopup').classList.add('hidden'); }
        function verifyPin() {
            if(document.getElementById('pinInput').value === '1947') {
                isPremium = true;
                document.getElementById('badge').innerText = 'ELITE ACCESS';
                document.getElementById('badge').style.color = '#ffd700';
                document.getElementById('badge').style.borderColor = '#ffd700';
                document.getElementById('premium1').style.opacity = '1';
                document.getElementById('premium1').onclick = () => setMode('solfeggio');
                document.getElementById('premium2').style.opacity = '1';
                document.getElementById('premium2').onclick = () => setMode('gamma');
                closeLogin(); alert('Founder Verified. Elite Modes Unlocked.');
            } else { alert('Incorrect PIN'); }
        }

        function initAudio() { if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }

        function createBrownNoise() {
            const bufferSize = audioCtx.sampleRate * 2, buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate), data = buffer.getChannelData(0);
            let lastOut = 0;
            for (let i = 0; i < bufferSize; i++) {
                const white = Math.random() * 2 - 1;
                data[i] = (lastOut + (0.02 * white)) / 1.02;
                lastOut = data[i]; data[i] *= 3.5;
            }
            const source = audioCtx.createBufferSource(); source.buffer = buffer; source.loop = true;
            const filter = audioCtx.createBiquadFilter(); filter.type = 'lowpass'; filter.frequency.value = 400; // DEEP & NATURAL
            source.connect(filter); return { source, output: filter };
        }

        function playFreq(f, vol) {
            const o = audioCtx.createOscillator(); o.frequency.value = f;
            const g = audioCtx.createGain(); g.gain.value = vol;
            o.connect(g); g.connect(gainNode); o.start(); oscillators.push(o);
        }

        function startEngine() {
            gainNode = audioCtx.createGain(); gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, audioCtx.currentTime + 1.5);
            gainNode.connect(audioCtx.destination);
            if(currentMode === 'focus') { const n = createBrownNoise(); n.output.connect(gainNode); n.source.start(); oscillators.push(n.source); }
            if(currentMode === 'maths') { playFreq(40, 0.05); playFreq(200, 0.02); }
            if(currentMode === 'solfeggio') { playFreq(528, 0.05); }
            if(currentMode === 'gamma') { playFreq(100, 0.05); playFreq(40, 0.05); }
        }

        function togglePlay() {
            initAudio(); if(!isPlaying) { startEngine(); isPlaying = true; document.getElementById('playBtn').innerText = 'STOP SESSION'; document.getElementById('circle').classList.add('active-pulse'); }
            else { gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.5); setTimeout(() => { oscillators.forEach(o => o.stop()); oscillators = []; isPlaying = false; document.getElementById('playBtn').innerText = 'START SESSION'; document.getElementById('circle').classList.remove('active-pulse'); }, 500); }
        }

        function setMode(m) { if(isPlaying) togglePlay(); currentMode = m; document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active')); event.currentTarget.classList.add('active'); }
    </script>
</body>
</html>
